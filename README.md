## Проектная работа " Веб-приложение для выставочных стендов"

Проект представляет собой адаптивное одностраничное веб-приложение (SPA-подобное) для управления сметами, складскими операциями и отчетностью.
Основные функции включают:

- Создание и редактирование проектов,
- Формирование смет,
- Учет складских операций (списание материалов),
- Генерация отчетов,
- Экспорт данных в Excel

Стек: 

- React (TypeScript), 
- Material-UI (MUI) для интерфейса,
- LocalStorage для хранения данных,
- date-fns для работы с датами,
- xlsx для экспорта в Excel

Структура проекта:

- src/App.tsx - корневой компонент приложения
- src/AppNav.tsx - навигация между вкладками
- src/ProjectSelector.tsx - выбор и создание проектов

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
Приложение будет доступно по адресу: http://localhost:3000


## Данные и типы данных используемые в приложении

#### Описание данных сметы

```

interface EstimateItem {
  id: string;
  section: string;           // Раздел сметы
  name: string;              // Наименование
  costType: CostType;        // Вид затрат
  unit: Unit;                // Единица измерения
  plannedQuantity: number | string; // Плановое количество
  unitCost: number | string;   // Стоимость единицы
}
```

#### Описание данных склада

```

interface WarehouseEntry {
  id: string;
  projectId: string;         // ID проекта
  date: string;              // Дата операции
  itemId: string;            // ID материала из сметы
  actualQuantity: number;    // Фактическое количество
  comment: string;           // Комментарий
}
```

#### Описание данных проекта

```

interface Project {
  id: string;
  name: string;               // Название проекта
  preparedBy: string;         // Составитель сметы
  preparationDate: string;    // Дата составления
  createdAt: string;         // Дата создания
  locked: boolean;           // Заблокирован для редактирования
  approved: boolean;          // Утвержден
  estimate: EstimateItem[];   // Строки сметы
  warehouse: WarehouseEntry[];// Складские операции
}
```

#### Описание данных наименования и ед.изм.

```

export type CostType = "Материалы" | "Аренда" | "Трудозатраты" | "Услуги";
export type Unit = "м²" | "м/п" | "шт" | "компл." | "чел/час";

```

## Архитектура приложения

Приложение разделено на:

- Модель данных (типы и вычисления),

- Компоненты с логикой (контейнеры),

- Компоненты отображения (презентеры).

### Базовый код

#### Модули

Estimate (Смета):

 - `EstimateTable.tsx` - таблица сметы

 - `EstimateForm.tsx`- форма добавления/редактирования строк сметы

Warehouse (Склад):

- `WarehouseTable.tsx` - таблица складских операций

- `WarehouseForm.tsx` - форма добавления списания материалов

Reports (Отчеты):

- `ReportTable.tsx` - отчет по исполнению сметы

#### Сервисы и утлиты

- `storage.ts` - работа с LocalStorage

- `calculations.ts` - расчеты по сметам и складу

- `exportToExcel.ts` - экспорт данных в Excel

#### Модели данных

- `types.ts` - типы данных (Project, EstimateItem, WarehouseEntry и др.)

- `mockProjects.ts` - тестовые данные

### Функциональность

#### Вкладка "Смета"

- Создание/редактирование/удаление строк сметы

- Группировка по разделам с возможностью раскрытия/скрытия

- Автоматический расчет сумм

- Утверждение сметы (блокировка редактирования)

- Экспорт в Excel

#### Вкладка "Склад"

- Учет списания материалов

- Сравнение плановых и фактических показателей

- Редактирование количества списанных материалов

- Фильтрация только по материалам (исключая другие виды затрат)

#### Вкладка "Отчет"

- Сравнение плановых и фактических показателей

- Визуализация отклонений (подсветка отрицательных значений)

- Расчет разниц в количестве и суммах

### Логика работы

- При запуске приложения загружаются данные из LocalStorage

- Если данных нет, загружаются mock-данные

- Пользователь выбирает проект или создает новый

- В зависимости от выбранной вкладки отображается:

- Смета (с возможностью редактирования, если не утверждена)

- Складские операции

- Отчет по исполнению сметы

- Все изменения автоматически сохраняются в LocalStorage

### Особенности реализации

#### Валидация данных

- Проверка обязательных полей

- Проверка числовых значений на положительность

- Ограничение ввода только чисел для количественных полей

#### Расчеты

- Автоматический расчет сумм

- Расчет НДС (20%) и непредвиденных расходов (5%)

- Сравнение плановых и фактических показателей

#### Бизнес-правила

- Утвержденные сметы нельзя редактировать

- На складе учитываются только материалы (не другие виды затрат)

- При экспорте в Excel формируются два листа: "Смета" и "Склад"